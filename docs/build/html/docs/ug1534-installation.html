


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Detailed Applications Description" href="ug1534-detailedappsdescriptions.html" />
    <link rel="prev" title="Supported Services" href="ug1534-supportedservices.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> U25N
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">U25N</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ug1534-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="ug1534-supportedservices.html">Supported Services</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">U25N Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-requirements-and-component-versions-supported">Basic Requirements and Component Versions Supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="#u25n-driver">U25N Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utility">Utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#u25n-driver-installation">U25N Driver Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-u25n-firmware">Updating U25N Firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sfboot-configuration">sfboot Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#u25n-shell">U25N Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shell-version-check">Shell Version Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#golden-image-functionality">Golden Image Functionality</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#checking-basic-nic-functionality">Checking Basic NIC Functionality</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deployment-image-flashing">Deployment Image Flashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-partial-bitstream-into-deployment-shell">Loading Partial Bitstream into Deployment Shell</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#updating-xcu25-linux-kernel-image">Updating XCU25 Linux Kernel Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reverting-u25n-smartnic-to-golden-image">Reverting U25N SmartNIC to Golden Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ug1534-detailedappsdescriptions.html">Detailed Applications Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="ug1534-dpdk.html">DPDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="ug1534-shellprogramming.html">U25N Shell Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="ug1534-vminstall.html">VM Installation</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/docs/ug1534-installation.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">U25N</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>U25N Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/ug1534-installation.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="u25n-installation">
<h1>U25N Installation<a class="headerlink" href="#u25n-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-requirements-and-component-versions-supported">
<h2>Basic Requirements and Component Versions Supported<a class="headerlink" href="#basic-requirements-and-component-versions-supported" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>OS requirement: Ubuntu 18.04 or 20.04.</p>
<p><strong><em>Note</em>:</strong> Xilinx recommends using the LTS version of Ubuntu.</p>
</li>
<li><p>Kernel requirements:</p>
<ul class="simple">
<li><p>OVS Functionality ≥ 4.15.</p></li>
<li><p>Stateless Firewall Functionality ≥ 5.5.</p></li>
</ul>
<p><strong><em>Note</em>:</strong> Xilinx recommends the default kernel 5.8 that comes with Ubuntu 20.04.02 LTS to support all features of the U25N hardware.</p>
</li>
<li><p>PCIe® Gen3 x16 slot.</p></li>
<li><p>Requires passive airflow. More details can be found in <em>Alveo U25N SmartNIC Data Sheet</em> (DS1005).</p></li>
<li><p>U25N driver version: 5.3.3.1003 (minimum).</p>
<p><strong><em>Note</em>:</strong> To install the latest U25N driver, refer to <a class="reference external" href="linkbrokeninpdf">U25N Driver</a>.</p>
</li>
<li><p>X2 firmware version: v7.8.17.1004 (minimum).</p>
<p><strong><em>Note</em>:</strong> To install the latest firmware, refer to the Updating U25N Firmware section.</p>
</li>
<li><p>OVS version: 2.12 and above. For more information about OVS and its installation, refer to <a class="reference external" href="https://docs.openvswitch.org/en/latest/intro/install/general">https://docs.openvswitch.org/en/latest/intro/install/general</a>.</p></li>
</ul>
</div>
<div class="section" id="u25n-driver">
<h2>U25N Driver<a class="headerlink" href="#u25n-driver" title="Permalink to this headline">¶</a></h2>
<p><strong><em>Note</em>:</strong> Log in as root user before proceeding with the following steps.</p>
<p>After the server is booted with U25N hardware, check whether the U25N SmartNIC is detected using the lspci command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lspci</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">Solarflare</span>
</pre></div>
</div>
<p>Two PCI IDs corresponding to the U25N are displayed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">af</span><span class="p">:</span><span class="mf">00.0</span> <span class="n">Ethernet</span> <span class="n">controller</span><span class="p">:</span> <span class="n">Solarflare</span> <span class="n">Communications</span> <span class="n">XtremeScale</span> <span class="n">SFC9250</span>
<span class="mi">10</span><span class="o">/</span><span class="mi">25</span><span class="o">/</span><span class="mi">40</span><span class="o">/</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="n">G</span> <span class="n">Ethernet</span> <span class="n">Controller</span> <span class="p">(</span><span class="n">rev</span> <span class="mi">01</span><span class="p">)</span>
<span class="n">af</span><span class="p">:</span><span class="mf">00.1</span> <span class="n">Ethernet</span> <span class="n">controller</span><span class="p">:</span> <span class="n">Solarflare</span> <span class="n">Communications</span> <span class="n">XtremeScale</span> <span class="n">SFC9250</span>
<span class="mi">10</span><span class="o">/</span><span class="mi">25</span><span class="o">/</span><span class="mi">40</span><span class="o">/</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="n">G</span> <span class="n">Ethernet</span> <span class="n">Controller</span> <span class="p">(</span><span class="n">rev</span> <span class="mi">01</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="utility">
<h3>Utility<a class="headerlink" href="#utility" title="Permalink to this headline">¶</a></h3>
<p>The Solarflare Linux Utilities package (SF-107601-LS) is available from <a class="reference external" href="https://support-nic.xilinx.com/wp/drivers?sd=SF-107601-LS-71&amp;pe=1945">https://support-nic.xilinx.com/wp/drivers?sd=SF-107601-LS-71&amp;pe=1945</a>.</p>
<ol>
<li><p>Download and unzip the package on the target server.</p>
<p><strong><em>Note</em>:</strong> Alien package must be downloaded using the command <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">alien</span></code>.</p>
</li>
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">.deb</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo alien sfutils‐&lt;version&gt;.x86_64.rpm
</pre></div>
</div>
<p>This command generates the <code class="docutils literal notranslate"><span class="pre">sfutils_&lt;version&gt;_amd64.deb</span></code> file.</p>
</li>
<li><p>Install the <code class="docutils literal notranslate"><span class="pre">.deb</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">sfutils_</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">_amd64</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</li>
</ol>
<p>The sfupdate, sfkey, sfctool, and sfboot utilities are available on the server.</p>
</div>
<div class="section" id="u25n-driver-installation">
<h3>U25N Driver Installation<a class="headerlink" href="#u25n-driver-installation" title="Permalink to this headline">¶</a></h3>
<p><strong><em>Note</em>:</strong> Install the dkms package with the following command if not available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">dkms</span>
</pre></div>
</div>
<ol>
<li><p>Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give the output as version 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> If the driver version is at least 5.3.3.1003, ignore the following step.</p>
</li>
<li><p>If the Debian package already exists, remove the already existing one before installing the latest Debian package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">modprobe</span> <span class="n">mtd</span> <span class="p">[</span><span class="k">for</span> <span class="n">first</span> <span class="n">time</span> <span class="n">alone</span><span class="p">]</span>
<span class="n">modprobe</span> <span class="n">mdio</span> <span class="p">[</span><span class="k">for</span> <span class="n">first</span> <span class="n">time</span> <span class="n">alone</span><span class="p">]</span>
<span class="n">rmmod</span> <span class="n">sfc</span>
<span class="n">dpkg</span> <span class="o">-</span><span class="n">r</span> <span class="n">sfc</span><span class="o">-</span><span class="n">dkms</span>
<span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">sfc</span><span class="o">-</span><span class="n">dkms_x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x_all</span><span class="o">.</span><span class="n">deb</span>
<span class="n">modprobe</span> <span class="n">sfc</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">sfc</span><span class="o">-</span><span class="n">dkms_5</span><span class="mf">.3.3.1003</span><span class="n">_all</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="updating-u25n-firmware">
<h3>Updating U25N Firmware<a class="headerlink" href="#updating-u25n-firmware" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Make sure the U25N driver is loaded using the <code class="docutils literal notranslate"><span class="pre">lsmod</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lsmod</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">sfc</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lsmod</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">sfc</span>
<span class="n">sfc</span> <span class="mi">626688</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p>Execute the following step to update the firmware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sfupdate</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">X2_interface</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">image</span> <span class="o">&lt;</span><span class="n">firmware</span> <span class="n">image</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">write</span> <span class="o">--</span><span class="n">force</span> <span class="o">--</span><span class="n">yes</span>
</pre></div>
</div>
<p><strong><em>Note</em>:</strong> Use the PF0 interface. No reboot is required.</p>
</li>
<li><p>Confirm the firmware version using the sfupdate command. The version should be 1004.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sfupdate</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">Bundle</span>
</pre></div>
</div>
<p>Bundle type: U25 (bundle type for production SmartNICs is U25N) Bundle
version: v7.8.17.1004 (minimum)</p>
</li>
</ol>
</div>
<div class="section" id="sfboot-configuration">
<h3>sfboot Configuration<a class="headerlink" href="#sfboot-configuration" title="Permalink to this headline">¶</a></h3>
<p><strong><em>Note</em>:</strong> Ignore this section if the U25N mode is SR-IOV and the required VF counts are already assigned. This can be verified by running the sfboot command as root.</p>
<p>Refer to the Solarflare server adapter user guide at <a class="reference external" href="https://support-nic.xilinx.com/wp/drivers">https://support-nic.xilinx.com/wp/drivers</a>. X2 switch mode should be in SR-IOV. Based on the number of VF required on each U25N PF interface, execute the following command. The maximum vf-count could be 120:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sfboot</span> <span class="n">switch</span><span class="o">-</span><span class="n">mode</span><span class="o">=</span><span class="n">sriov</span> <span class="n">vf</span><span class="o">-</span><span class="n">count</span><span class="o">=&lt;</span><span class="n">No</span><span class="o">.</span> <span class="n">of</span> <span class="n">VF</span> <span class="n">required</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example, here 120 VFs have been assigned for each U25N PF interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sfboot</span> <span class="n">switch</span><span class="o">-</span><span class="n">mode</span><span class="o">=</span><span class="n">sriov</span> <span class="n">vf</span><span class="o">-</span><span class="n">count</span><span class="o">=</span><span class="mi">120</span>
</pre></div>
</div>
<p><strong><em>Note</em>:</strong> Powercycle is required to update the configuration. The configuration is retained even after cold or warm reboot.</p>
</div>
</div>
<div class="section" id="u25n-shell">
<h2>U25N Shell<a class="headerlink" href="#u25n-shell" title="Permalink to this headline">¶</a></h2>
<p>By default, the U25N shell is programmed with the golden image. Follow the steps in the following sections to verify the shell. If this fails, refer to <a class="reference internal" href="ug1534-shellprogramming.html"><span class="doc">U25N Shell Programming</span></a>.</p>
<div class="section" id="shell-version-check">
<h3>Shell Version Check<a class="headerlink" href="#shell-version-check" title="Permalink to this headline">¶</a></h3>
<p><strong><em>Note</em>:</strong> If the U25N driver version is 5.3.3.1003, ignore step 1.</p>
<ol>
<li><p>Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give an output of version of 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> To install the latest sfc driver, refer to the <a class="reference external" href="link?">U25N Driver</a> section.</p>
</li>
<li><p>The u25n_update utility can be used to read the U25N shell version. Version reading is done at the U25N PF0 network interface using the u25n_update utility.</p>
<ol>
<li><p>Reading of version is performed using a CLI command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="n">u25eth0</span>
</pre></div>
</div>
<p>Golden shell version: 0x21081600.</p>
</li>
<li><p>After the versions are read successfully, the log would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
<p><strong><em>Note</em>:</strong> If u25n_update status shows failed, the shell is not programmed with the golden image. Refer to <a class="reference internal" href="ug1534-shellprogramming.html"><span class="doc">U25N Shell Programming</span></a> to flash the golden image to the U25N shell.</p>
<p>Follow the sections below if needed to check the golden image functionality. For flashing deployment image to U25N shell, refer to the <a class="reference external" href="link">Deployment Image Flashing</a> section.</p>
</div>
<div class="section" id="golden-image-functionality">
<h3>Golden Image Functionality<a class="headerlink" href="#golden-image-functionality" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>U25N shell with Golden image includes Image Upgrade and Basic NIC functions. Offloaded features are not supported.</p></li>
<li><p>U25N hardware in legacy mode [MAC0 TO MAC2 AND MAC1 TO MAC3].</p></li>
</ul>
<div class="section" id="checking-basic-nic-functionality">
<h4>Checking Basic NIC Functionality<a class="headerlink" href="#checking-basic-nic-functionality" title="Permalink to this headline">¶</a></h4>
<ol class="simple">
<li><p>Run DPDK testpmd at the X2 PF interface.</p></li>
<li><p>The packet sending to an external MAC is received at the testpmd application corresponding to PF bound.</p></li>
<li><p>Connect the external MAC to the traffic generator or any peer NIC device.</p></li>
</ol>
<p><strong><em>Note</em>:</strong> Refer to <a class="reference external" href="link">DPDK on U25N</a> to run dpdk-testpmd.</p>
</div>
</div>
<div class="section" id="deployment-image-flashing">
<h3>Deployment Image Flashing<a class="headerlink" href="#deployment-image-flashing" title="Permalink to this headline">¶</a></h3>
<p>The U25N SmartNICs are shipped with the golden image. Refer to <a class="reference external" href="link">Shell Version Check</a> to check the shell version. If the shell has a golden image, continue with the following steps.</p>
<p><strong><em>Note</em>:</strong> Before flashing the image, make sure the SmartNIC is in legacy mode, no OVS software application is running, and OVS databases are removed.</p>
<ol>
<li><p>If the U25N driver version is 5.3.3.1003, ignore this step. Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give an output of version 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> To install the latest sfc driver, refer to U25N Driver.</p>
</li>
<li><p>The U25N SmartNIC should be in legacy mode. Use the following
command to verify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="n">show</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The output of the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
<p>If the U25N hardware is not in legacy mode, then change to legacy mode using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="nb">set</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">PCIe</span> <span class="n">device</span> <span class="n">bus</span> <span class="nb">id</span><span class="o">&gt;</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
</li>
<li><p>Image flashing is done via the U25N PF0 network interface using the u25n_update utility.</p>
<ol>
<li><p>The image is flashed using a CLI command.</p>
<p><strong><em>Note</em>:</strong> The interface should be the PF0 interface of the target U25N SmartNIC. The file must be a .bin file. Make sure the path to the image to be flashed is given correctly, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span> <span class="o">&lt;</span><span class="n">path_to_bin_or_ub_file_with_extension</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span> <span class="n">BOOT</span><span class="o">.</span><span class="n">bin</span> <span class="n">u25eth0</span>
</pre></div>
</div>
</li>
<li><p>Flash operations like ERASE, WRITE, and VERIFY are displayed in the CLI based on the procedures done by the u25n_update utility.</p></li>
<li><p>After the image is flashed successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Reset the U25N hardware to boot from the updated deployment image:</p>
<p>For example:</p>
<p>After the reset is done successfully, the following log is shown:</p>
</li>
<li><p>The u25n_update utility can be used to get the U25N deployment image version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="n">u25eth0</span>
</pre></div>
</div>
<p>Deployment shell version: 0x21011800.</p>
<p>After the versions are read successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="loading-partial-bitstream-into-deployment-shell">
<h3>Loading Partial Bitstream into Deployment Shell<a class="headerlink" href="#loading-partial-bitstream-into-deployment-shell" title="Permalink to this headline">¶</a></h3>
<p><strong><em>Note</em>:</strong> The deployment image must be flashed to the U25N shell before following the steps below. Refer to <a class="reference external" href="link">Deployment Image Flashing</a> to flash the deployment image to the U25N shell.</p>
<ol>
<li><p>If the U25N driver version is 5.3.3.1003, ignore this step. Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give an output of version 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> To install the latest sfc driver, refer to <a class="reference external" href="link">U25N Driver</a>.</p>
<p><strong><em>Note</em>:</strong> Before flashing the image, make sure the SmartNIC is in legacy mode, no OVS software application is running, and OVS databases are removed.</p>
</li>
<li><p>The U25N SmartNIC should be in legacy mode. Use the following command to verify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="n">show</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The output of the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
<p>If the U25N hardware is not in legacy mode, then change to legacy mode using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="nb">set</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">PCIe</span> <span class="n">device</span> <span class="n">bus</span> <span class="nb">id</span><span class="o">&gt;</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
<p><strong><em>Note</em>:</strong> The interface should be the PF0 interface of the target U25N SmartNIC. The file must be a <code class="docutils literal notranslate"><span class="pre">.bit</span></code> file. Make sure the path to the image to be flashed is given correctly.</p>
</li>
<li><p>Image flashing is done via the U25N PF0 network interface using the u25n_update utility.</p>
<ol>
<li><p>The image is flashed using a CLI command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span> <span class="o">&lt;</span><span class="n">path_to_bit_file_with_extension</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span> <span class="n">fpga</span><span class="o">.</span><span class="n">bit</span> <span class="n">u25eth0</span>
</pre></div>
</div>
</li>
<li><p>After the image is flashed successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">Successful</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>The u25n_update utility can be used to get the bitstream version. Version reading is done at the U25N PF0 network interface using the u25n_update utility:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">get</span><span class="o">-</span><span class="n">version</span> <span class="n">u25eth0</span>
</pre></div>
</div>
<p>Bitstream version: 0xA00D10D1</p>
<p>After the versions are read successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="updating-xcu25-linux-kernel-image">
<h2>Updating XCU25 Linux Kernel Image<a class="headerlink" href="#updating-xcu25-linux-kernel-image" title="Permalink to this headline">¶</a></h2>
<p>This section is required when the file system needs to be updated for the existing deployment image. The deployment image must be flashed to the U25N shell before following the steps below. Refer to <a class="reference external" href="link">Deployment Image Flashing</a> to flash the deployment image.</p>
<p><strong><em>Note</em>:</strong> Before flashing the image, make sure the SmartNIC is in legacy mode, no OVS software application is running, and OVS databases are removed.</p>
<ol>
<li><p>If the U25N driver version is 5.3.3.1003, ignore this step. Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give an output of version 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> To install the latest sfc driver, refer to U25N Driver.</p>
</li>
<li><p>The U25N SmartNIC should be in legacy mode. Use the following command to verify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="n">show</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The output of the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
<p>If the U25N hardware is not in legacy mode, then change to legacy mode using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="nb">set</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">PCIe</span> <span class="n">device</span> <span class="n">bus</span> <span class="nb">id</span><span class="o">&gt;</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
</li>
<li><p>Image flashing is done via the U25N PF0 network interface using the u25n_update utility.</p>
<p><strong><em>Note</em>:</strong> The interface should be the PF0 interface of the target U25N SmartNIC. The file must be a <code class="docutils literal notranslate"><span class="pre">.ub</span></code> file. Make sure the path to the image to be flashed is given correctly.</p>
<ol>
<li><p>The image is flashed using a CLI command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span>    <span class="o">&lt;</span><span class="n">path_to_ub_file_with_extension</span><span class="o">&gt;&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">upgrade</span> <span class="n">image</span><span class="o">.</span><span class="n">ub</span> <span class="o">&lt;</span><span class="n">u25eth0</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Flash operations like ERASE, WRITE, and VERIFY are displayed in the CLI based on the procedures done by the u25n_update utility.</p></li>
<li><p>After the image is flashed successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Reset the U25N hardware to boot with the new kernel image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">reset</span> <span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">reset</span> <span class="o">&lt;</span><span class="n">u25eth0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>After the image is flashed successfully, the following log is shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="reverting-u25n-smartnic-to-golden-image">
<h2>Reverting U25N SmartNIC to Golden Image<a class="headerlink" href="#reverting-u25n-smartnic-to-golden-image" title="Permalink to this headline">¶</a></h2>
<p>Reverting to factory (or golden) image is recommended in the following cases:</p>
<ul class="simple">
<li><p>Preparing to flash a different shell onto the SmartNIC.</p></li>
<li><p>The SmartNIC no longer appears on lspci after programming a custom image onto the SmartNIC.</p></li>
<li><p>To recover from the state where the deployment image is unresponsive even after performing multiple resets using the u25n_update utility.</p></li>
</ul>
<p><strong><em>Note</em>:</strong> After the factory reset is performed, the U25N loaded is the golden image. It has the essential provision to upgrade the deployment image but no provision to upgrade bitstream.</p>
<ol>
<li><p>If the U25N driver version is 5.3.3.1003, ignore this step. Check the driver version of the U25N interface using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethtool</span> <span class="o">-</span><span class="n">i</span> <span class="n">U25_eth0</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">version</span>
</pre></div>
</div>
<p>This should give an output of version 5.3.3.1003.</p>
<p><strong><em>Note</em>:</strong> To install the latest sfc driver, refer to U25N Driver.</p>
<p><strong><em>Note</em>:</strong> Before flashing the image, make sure the SmartNIC is in legacy mode, no OVS software application is running, and OVS databases are removed.</p>
</li>
<li><p>The U25N SmartNIC should be in legacy mode. Use the following command to verify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="n">show</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The output of the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pci_id</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
<p>If the U25N hardware is not in legacy mode, then change to legacy mode
using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devlink</span> <span class="n">dev</span> <span class="n">eswitch</span> <span class="nb">set</span> <span class="n">pci</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="o">&lt;</span><span class="n">PCIe</span> <span class="n">device</span> <span class="n">bus</span> <span class="nb">id</span><span class="o">&gt;</span> <span class="n">mode</span> <span class="n">legacy</span>
</pre></div>
</div>
</li>
<li><p>Factory reset is done via the U25N PF0 network interface.</p>
<ol class="simple">
<li><p>Factory reset is performed using a CLI command:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">factory</span><span class="o">-</span><span class="n">reset</span> <span class="o">&lt;</span><span class="n">PF0_interface</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">u25n_update</span> <span class="n">factory</span><span class="o">-</span><span class="n">reset</span> <span class="o">&lt;</span><span class="n">u25eth0</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="simple">
<li><p>After the factory reset is done successfully, the following log is shown:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATUS</span><span class="p">:</span> <span class="n">SUCCESSFUL</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ug1534-detailedappsdescriptions.html" class="btn btn-neutral float-right" title="Detailed Applications Description" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ug1534-supportedservices.html" class="btn btn-neutral float-left" title="Supported Services" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on March 31, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>